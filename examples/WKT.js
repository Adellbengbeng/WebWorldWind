/*
 * Copyright (C) 2017 United States Government as represented by the Administrator of the
 * National Aeronautics and Space Administration. All Rights Reserved.
 */

requirejs(['../src/WorldWind',
        './LayerManager'],
    function (ww,
              LayerManager) {
        "use strict";

        WorldWind.Logger.setLoggingLevel(WorldWind.Logger.LEVEL_WARNING);

        var wwd = new WorldWind.WorldWindow("canvasOne");

        var layers = [
            {layer: new WorldWind.BMNGLayer(), enabled: true},
            {layer: new WorldWind.CompassLayer(), enabled: true},
            {layer: new WorldWind.CoordinatesDisplayLayer(wwd), enabled: true},
            {layer: new WorldWind.ViewControlsLayer(wwd), enabled: true}
        ];

        for (var l = 0; l < layers.length; l++) {
            layers[l].layer.enabled = layers[l].enabled;
            wwd.addLayer(layers[l].layer);
        }

        // Set up the common placemark attributes.
        var placemarkAttributes = new WorldWind.PlacemarkAttributes(null);
        placemarkAttributes.imageScale = 0.05;
        placemarkAttributes.imageColor = WorldWind.Color.WHITE;
        placemarkAttributes.labelAttributes.offset = new WorldWind.Offset(
            WorldWind.OFFSET_FRACTION, 0.5,
            WorldWind.OFFSET_FRACTION, 1.5
        );
        placemarkAttributes.imageSource = WorldWind.configuration.baseUrl + "images/white-dot.png";

        var shapeConfigurationCallback = function (geometry, properties) {
            var configuration = {};

            if (geometry.isPointType() || geometry.isMultiPointType()) {
                configuration.attributes = new WorldWind.PlacemarkAttributes(placemarkAttributes);

                if (properties && (properties.name || properties.Name || properties.NAME)) {
                    configuration.name = properties.name || properties.Name || properties.NAME;
                }
                if (properties && properties.POP_MAX) {
                    var population = properties.POP_MAX;
                    configuration.attributes.imageScale = 0.01 * Math.log(population);
                }
            }
            else if (geometry.isLineStringType() || geometry.isMultiLineStringType()){
                configuration.attributes =  new WorldWind.ShapeAttributes(null);
                configuration.attributes.drawOutline = true;
                configuration.attributes.outlineColor = new WorldWind.Color(
                    0.1 * configuration.attributes.interiorColor.red,
                    0.3 * configuration.attributes.interiorColor.green,
                    0.7 * configuration.attributes.interiorColor.blue,
                    1.0
                );
                configuration.attributes.outlineWidth = 1.0;
            }
            else if(geometry.isPolygonType() || geometry.isMultiPolygonType()) {
                configuration.attributes = new WorldWind.ShapeAttributes(null);

                // Fill the polygon with a random pastel color.
                configuration.attributes.interiorColor = new WorldWind.Color(
                    0.375 + 0.5 * Math.random(),
                    0.375 + 0.5 * Math.random(),
                    0.375 + 0.5 * Math.random(),
                    0.1
                );
                // Paint the outline in a darker variant of the interior color.
                configuration.attributes.outlineColor = new WorldWind.Color(
                    0.5 * configuration.attributes.interiorColor.red,
                    0.5 * configuration.attributes.interiorColor.green,
                    0.5 * configuration.attributes.interiorColor.blue,
                    1.0
                );
            }

            return configuration;
        };

        // Polygon test
        var polygonLayer = new WorldWind.RenderableLayer("Polygon");
        var polygonWKT = new WorldWind.WKTParser("POLYGON ((14.70028 48.581379,14.656387 48.607498,14.652498 48.609444,14.615 48.628052,14.608889 48.628883,14.505554 48.628326,14.446388 48.618889,14.390276 48.592499,14.278332 48.582497,14.184166 48.596107,14.0525 48.664162,14.0525 48.668327,14.051388 48.671944,14.049166 48.674721,14.007221 48.710274,13.99 48.717773,13.88361 48.763611,13.858055 48.770554,13.833611 48.773605,13.832499 48.774994,13.815554 48.778328,13.812222 48.78083,13.812777 48.785271,13.815832 48.79277,13.815554 48.796944,13.813889 48.800278,13.802776 48.810829,13.785831 48.830826,13.779444 48.835831,13.769444 48.838608,13.765554 48.840828,13.763054 48.843605,13.761389 48.846939,13.756666 48.852493,13.753332 48.859161,13.745832 48.867775,13.742498 48.874443,13.740833 48.88166,13.736666 48.883888,13.731943 48.883606,13.724443 48.87944,13.719444 48.878326,13.707777 48.880272,13.691111 48.878326,13.677776 48.884163,13.666666 48.894722,13.661943 48.896385,13.655554 48.901108,13.649166 48.906105,13.641109 48.914162,13.625555 48.939163,13.624998 48.947495,13.627499 48.950554,13.626389 48.953331,13.605276 48.950829,13.599722 48.951942,13.593332 48.95694,13.59111 48.959717,13.587776 48.966385,13.580555 48.970833,13.564826 48.973667,13.509722 48.972496,13.402542 49.006187,13.396944 49.04805,13.395277 49.050278,13.322777 49.098328,13.314165 49.103333,13.173054 49.167221,13.031111 49.287773,12.966665 49.33194,12.957222 49.336388,12.945555 49.339439,12.890833 49.346939,12.88611 49.346939,12.884165 49.345276,12.884165 49.342216,12.885277 49.339722,12.893055 49.331108,12.891109 49.328888,12.887777 49.327774,12.883333 49.327499,12.878611 49.328049,12.80361 49.337776,12.795555 49.339722,12.78611 49.344162,12.674444 49.424995,12.597776 49.527496,12.578609 49.560555,12.554722 49.616661,12.524443 49.66555,12.515554 49.679443,12.513054 49.681389,12.508888 49.682495,12.47611 49.690826,12.455555 49.695549,12.467499 49.782219,12.469444 49.784721,12.546944 49.897499,12.547222 49.907219,12.545555 49.91555,12.544167 49.918053,12.492777 49.974998,12.49 49.976662,12.471109 49.985832,12.429443 49.993889,12.307499 50.047493,12.265554 50.066109,12.206142 50.106209,12.192499 50.13166,12.193888 50.138054,12.196388 50.143883,12.209166 50.160553,12.209721 50.163887,12.208611 50.169441,12.123333 50.307495,12.120832 50.309441,12.093704 50.322533,12.177221 50.318054,12.180277 50.316383,12.195833 50.305832,12.278055 50.221664,12.284166 50.215271,12.323055 50.206665,12.325554 50.236107,12.398611 50.309166,12.486111 50.373055,12.51222 50.391106,12.51861 50.393883,12.61861 50.411942,12.623333 50.411942,12.671389 50.411942,12.734722 50.428329,12.746111 50.434715,12.768332 50.44416,12.77611 50.445831,12.818888 50.454437,12.831388 50.45166,12.855833 50.442215,12.896944 50.426109,12.899721 50.424438,12.917221 50.414719,12.938889 50.408882,12.950554 50.41111,12.985558 50.418327,12.991943 50.421104,13.011665 50.436386,13.018888 50.442215,13.079443 50.498055,13.183332 50.501938,13.191111 50.503609,13.203333 50.516937,13.208887 50.523888,13.222776 50.544167,13.223888 50.546944,13.223888 50.550278,13.222221 50.55555,13.222221 50.558609,13.224165 50.56472,13.248055 50.588333,13.25111 50.589996,13.378332 50.62944,13.413332 50.612221,13.416388 50.61055,13.436666 50.60527,13.458611 50.600555,13.463888 50.600273,13.4725 50.60527,13.518332 50.637772,13.520277 50.639999,13.519722 50.642776,13.515554 50.646942,13.510832 50.650551,13.541111 50.68972,13.582222 50.709442,13.634722 50.722221,13.669443 50.72583,13.734165 50.730827,13.891109 50.768883,13.902777 50.786942,13.904444 50.789444,13.986666 50.813606,13.99472 50.815277,14.155554 50.843048,14.311388 50.882217,14.368332 50.934998,14.322777 50.945274,14.319721 50.946938,14.256109 50.987778,14.254999 50.990273,14.255554 50.99305,14.265554 51.009438,14.285555 51.037498,14.302776 51.051384,14.309721 51.053604,14.491665 51.036659,14.569166 51.005554,14.597221 50.982498,14.628332 50.923607,14.631388 50.881104,14.618055 50.859993,14.619165 50.857498,14.621666 50.855553,14.651667 50.847221,14.717777 50.829163,14.739721 50.823883,14.766666 50.818329,14.776388 50.818329,14.801666 50.818886,14.804165 50.820549,14.824999 50.856384,14.828333 50.865829,14.966665 50.859161,15.001665 50.866386,15.005278 50.867218,15.006943 50.869995,15.019165 50.950554,15.020555 50.964722,15.020555 50.967773,15.013887 50.979721,15.010555 50.984161,15.176943 51.014717,15.239443 50.991943,15.275276 50.974998,15.295277 50.954163,15.294167 50.948608,15.276943 50.938889,15.272778 50.934441,15.271944 50.931107,15.270832 50.921387,15.274443 50.91111,15.282221 50.893326,15.283333 50.890831,15.30361 50.864166,15.310555 50.85833,15.328888 50.854721,15.355555 50.846107,15.361944 50.84333,15.364166 50.841385,15.36972 50.831665,15.37972 50.779442,15.488333 50.786659,15.606667 50.772774,15.787498 50.744164,15.946943 50.689438,16.024441 50.629997,16.071388 50.635551,16.118053 50.657799,16.137497 50.656105,16.237499 50.670555,16.325554 50.66555,16.334999 50.663887,16.341942 50.66111,16.369999 50.644165,16.429165 50.602493,16.431389 50.600555,16.444443 50.585548,16.447777 50.581108,16.449165 50.575829,16.448055 50.572777,16.406666 50.523048,16.368332 50.498604,16.361111 50.496384,16.351944 50.496384,16.346664 50.496941,16.338333 50.499161,16.319164 50.505272,16.310833 50.504166,16.213886 50.449715,16.209164 50.445549,16.203888 50.437775,16.202774 50.431389,16.203331 50.428604,16.20583 50.423882,16.217499 50.41111,16.220554 50.409439,16.266109 50.389717,16.303055 50.378052,16.371944 50.361107,16.441387 50.316666,16.458611 50.303604,16.546108 50.229164,16.549999 50.224998,16.559166 50.214165,16.565277 50.202217,16.566387 50.178055,16.56361 50.164719,16.567497 50.160553,16.587776 50.139999,16.614441 50.11972,16.638054 50.109444,16.641941 50.10833,16.703888 50.098328,16.713886 50.097496,16.71833 50.097771,16.725277 50.099716,16.786663 50.140549,16.802935 50.169651,16.806942 50.174995,16.815552 50.183884,16.843887 50.200272,16.849998 50.203331,16.909164 50.222221,16.913609 50.222496,16.968609 50.222771,17.00222 50.216942,16.972775 50.309998,16.937496 50.340553,16.869442 50.405273,16.867496 50.410553,16.868053 50.413055,16.869999 50.415833,16.887497 50.437492,16.890274 50.439438,16.898609 50.440277,16.910831 50.440132,16.941387 50.434998,17.057777 50.410553,17.118053 50.39666,17.201942 50.363884,17.208611 50.358055,17.226944 50.345276,17.283607 50.320274,17.37833 50.279442,17.433052 50.270271,17.619999 50.265549,17.63361 50.265549,17.656666 50.269997,17.665554 50.274719,17.692219 50.296661,17.694443 50.298882,17.695 50.307777,17.693886 50.316383,17.694164 50.319443,17.69611 50.321938,17.703888 50.323326,17.722775 50.319717,17.726109 50.318329,17.753052 50.297775,17.762775 50.234718,17.763054 50.231941,17.764164 50.211662,17.763885 50.208611,17.762497 50.205551,17.698887 50.179993,17.691666 50.178055,17.651943 50.171944,17.63361 50.171944,17.623333 50.172775,17.614719 50.172493,17.607498 50.170555,17.600555 50.164162,17.59861 50.161659,17.597775 50.158333,17.60083 50.153885,17.60722 50.147774,17.657776 50.108055,17.836388 49.990829,17.843887 49.988327,17.867222 49.98111,17.882774 49.976944,17.887775 49.976662,17.913609 49.976387,17.922497 49.976944,17.933052 49.979721,18.009441 50.011108,18.053162 50.055931,18.094166 50.038055,18.270275 49.957771,18.350277 49.938889,18.549721 49.922493,18.553608 49.92305,18.557777 49.921661,18.577221 49.914444,18.579441 49.912498,18.581108 49.907494,18.57935 49.814995,18.634163 49.737778,18.786942 49.681938,18.809998 49.674438,18.811665 49.672218,18.839443 49.594994,18.847775 49.554161,18.852219 49.527771,18.851246 49.517357,18.792774 49.513885,18.655552 49.504166,18.581108 49.497772,18.568886 49.496109,18.562222 49.493889,18.551388 49.486938,18.548332 49.481667,18.547775 49.478333,18.548332 49.463608,18.546108 49.457497,18.541111 49.453331,18.386944 49.335831,18.379444 49.330276,18.317776 49.307495,18.30722 49.303886,18.281387 49.301941,18.269997 49.299995,18.216389 49.289162,18.212776 49.288055,18.208054 49.284164,18.179722 49.249443,18.175831 49.244438,18.174721 49.241661,18.174164 49.210274,18.161942 49.174164,18.158886 49.165276,18.15583 49.159721,18.145277 49.145,18.150833 49.129997,18.151386 49.124443,18.147778 49.115555,18.121944 49.082771,18.075279 49.041943,17.91111 48.984993,17.841942 48.928329,17.763054 48.879715,17.7575 48.876663,17.712219 48.85611,17.677498 48.851944,17.654999 48.851944,17.645554 48.851944,17.502777 48.838882,17.41861 48.82666,17.403889 48.822777,17.390274 48.822777,17.38583 48.823326,17.376389 48.827499,17.33083 48.850273,17.252777 48.870827,17.239998 48.872772,17.230274 48.873055,17.187908 48.869446,17.113888 48.833054,17.110554 48.830551,17.044167 48.771385,17.038887 48.765274,17.022499 48.743607,16.988331 48.681664,16.946182 48.619064,16.919998 48.700272,16.91861 48.703331,16.913055 48.708885,16.899719 48.722221,16.885277 48.729439,16.875832 48.727219,16.871944 48.724998,16.863052 48.722221,16.838608 48.71666,16.827221 48.715828,16.78833 48.719162,16.782776 48.720551,16.711666 48.746384,16.667221 48.781387,16.65583 48.787773,16.644997 48.79055,16.54361 48.811943,16.537498 48.812775,16.461941 48.813332,16.457497 48.811943,16.451664 48.806389,16.430832 48.782219,16.417774 48.756943,16.413055 48.750549,16.403332 48.74305,16.395275 48.739441,16.386387 48.736382,16.376389 48.734444,16.370552 48.733887,16.333054 48.733055,16.103333 48.75,16.081108 48.754715,16.060555 48.760277,16.021664 48.777222,15.964167 48.804718,15.849432 48.859703,15.746387 48.858604,15.68861 48.863327,15.683332 48.864716,15.584999 48.899162,15.564439 48.909164,15.546665 48.912216,15.519165 48.918327,15.509722 48.921661,15.451666 48.951111,15.3925 48.97361,15.364721 48.983604,15.353333 48.985832,15.301388 48.987778,15.156666 48.999718,15.065554 49.014717,15.031387 49.018608,15.025833 49.018883,15.011389 49.015274,14.996944 49.0075,14.98111 48.984718,14.978054 48.977219,14.978054 48.973053,14.984999 48.939163,14.958887 48.794716,14.885555 48.782776,14.849443 48.786385,14.836388 48.787498,14.830276 48.787498,14.815832 48.783882,14.812498 48.781387,14.730276 48.698608,14.72611 48.69194,14.722221 48.684715,14.714722 48.660553,14.715832 48.652771,14.721388 48.643326,14.720276 48.605827,14.718611 48.602219,14.706665 48.586662,14.704166 48.583611,14.70028 48.581379))");
        polygonWKT.load(null, shapeConfigurationCallback, polygonLayer);
        wwd.addLayer(polygonLayer);

        // MultiPolygon test
        var multiPolygonLayer = new WorldWind.RenderableLayer("MultiPolygon");
        var multiPolygonWKT = new WorldWind.WKTParser("MULTIPOLYGON (((23.990829 58.099998,23.97805000000011 58.097771,23.962772 58.09943,23.952774 58.103607,23.944996000000117 58.108604,23.938885 58.114441000000113,23.938606 58.122765,23.939995 58.131935,23.94305 58.139992,23.94777 58.147217,23.955551 58.152489,23.964996 58.156654,23.97916 58.15777,23.994717 58.156097000000102,24.006386 58.152771,24.016109 58.1486,24.022186 58.14275,24.024719 58.137215,24.02528 58.128876,24.015831000000105 58.114441000000113,24.00972 58.10833,24.001663 58.10332,23.990829 58.099998)),((22.990829 58.597771,23.090832 58.564438,23.263054 58.496101,23.273052 58.491936,23.289165 58.482208000000128,23.319717000000139 58.46166,23.332218000000125 58.449997,23.332775 58.441658,23.328053000000125 58.434433000000126,23.2675 58.429436,23.250000000000114 58.430275,23.226105 58.43665,23.206104 58.444992,23.198051 58.44971,23.142494000000113 58.443604000000107,23.076942 58.413879,23.064163 58.385826,23.02861 58.357773000000122,22.756943 58.240273000000116,22.648884000000123 58.23027,22.58194 58.241104000000121,22.520554 58.242218,22.487495000000138 58.242218,22.474995 58.241936,22.37833 58.223045,22.367496000000131 58.219711,22.288609 58.188042,22.279163 58.183876000000112,22.271664000000101 58.178604,22.26722 58.171379000000115,22.266388 58.163879,22.2691650000001 58.15638,22.273609 58.149719000000118,22.276108 58.142494,22.264721 58.102219,22.261944 58.093880000000127,22.202496 57.986107,22.09916 57.93055,22.07333 57.91666,22.051662 57.909714000000122,22.037777 57.908325000000104,22.022221 57.909714000000122,22.01028 57.913048000000117,22.000553 57.91694,21.994160000000136 57.922768,21.980549 57.958046,21.98582800000014 57.976379,22.082218 58.07666,22.089718 58.08194,22.10055 58.085266,22.112495000000138 58.083878000000141,22.151108 58.08638,22.197216 58.137497,22.201385 58.144714,22.196941 58.151382,22.188606 58.15638,22.17694 58.159431,22.145275 58.1586,22.131664 58.16082,22.07861 58.17083,22.068607 58.174713000000111,21.884441 58.25222,21.869717 58.262497,21.848606000000132 58.278877000000136,21.84416 58.285553000000107,21.841385 58.29305,21.843887000000109 58.299164,21.874439 58.339989,21.885273 58.343323,21.899162 58.342766,21.955551 58.34305,22.0075 58.35332,22.006386 58.359993,21.99638 58.381378,21.916664 58.4575,21.910275 58.463051000000121,21.901939 58.468048,21.878052 58.4741590000001,21.867775 58.478325,21.85139 58.48777,21.83194 58.504997000000117,21.842773000000136 58.508331000000112,21.924995 58.517212,21.98472 58.516388,22.000553 58.514999,22.112495000000138 58.492218,22.189163000000121 58.544998,22.19833 58.549438000000123,22.327221 58.577492,22.501663 58.602219,22.62416 58.593323000000112,22.76833 58.60027,22.775761 58.606155000000115,22.807774000000109 58.616386,22.82361 58.616936,22.871662000000129 58.617767,22.905273 58.617493000000138,22.917217000000107 58.616104000000121,22.978882 58.601105,22.990829 58.597771)),((23.364998 58.529991000000109,23.227219000000105 58.529716,23.215271 58.53305,23.091106000000138 58.580276,23.07111 58.588326,23.06472 58.594154000000117,23.060276000000101 58.60083,23.057774 58.608330000000137,23.060829 58.616386,23.06861 58.621658000000139,23.140274 58.665825,23.149719 58.670273,23.173607000000118 58.675827,23.186382 58.678047,23.200829 58.67916,23.216385 58.677773,23.247459 58.671051,23.271385 58.664436,23.317219 58.650826,23.339165 58.643326,23.347218 58.638603000000103,23.394997 58.565544000000102,23.399162 58.558884,23.396385000000123 58.550827,23.376106 58.53305,23.364998 58.529991000000109)),((23.277222 58.963051,23.18055 58.9611,23.16472 58.962769,23.152496 58.965828000000101,23.14444 58.970825,23.138050000000135 58.976654,23.113331 59.01721,23.110828 59.024712,23.117218 59.030823,23.12666 59.034996,23.137775 59.03833,23.15083 59.04055,23.181385 59.042221,23.19216 59.041985000000125,23.325829000000113 59.037498,23.339718 59.035271,23.35194 59.031937,23.361942000000113 59.027771000000143,23.370274000000109 59.023048,23.38722 59.00471,23.391663 58.99805,23.392220000000123 58.989716,23.387497 58.98276,23.3811070000001 58.976379,23.369995000000131 58.973045,23.291943 58.964157,23.277222 58.963051)),((22.749718000000144 59.000000000000114,22.801109 58.997215,22.843052000000114 59.00222,22.860828 59.001663,22.929718 58.98249,22.952496 58.96693,23.04361 58.851105,23.04805 58.844437,23.045277 58.83638,23.021664000000101 58.820549,23.005276 58.830551,22.960827000000108 58.84499,22.948330000000112 58.844437,22.88444 58.833054,22.865551 58.82444,22.868328000000133 58.818886,22.882217 58.816666,22.888607 58.810822000000144,22.887218 58.787773,22.88444 58.779716,22.848053 58.7736,22.81583 58.772766,22.798332 58.7736,22.784443 58.775826,22.77805 58.781662,22.77722 58.78999,22.783333 58.796104,22.792774000000122 58.80027,22.803886 58.803604,22.823051 58.81221,22.829163 58.818329000000119,22.826385 58.824165,22.812496 58.82638,22.79805 58.824997,22.77583 58.818604000000107,22.74721 58.80555,22.739437 58.80027,22.721107 58.781662,22.70138 58.753883,22.692493 58.739433000000133,22.68972 58.731102,22.680828000000133 58.716660000000104,22.674717 58.710548,22.666939 58.705269000000101,22.646385000000123 58.697769,22.62416 58.691101,22.59555 58.68832,22.56527 58.686653,22.5475 58.68721,22.53167 58.688599,22.517776 58.691101,22.479996000000142 58.69971,22.469715 58.703606,22.465271 58.710274,22.46944 58.715546,22.47194 58.76361,22.44999700000011 58.831383,22.445549000000142 58.838043,22.426105 58.85527,22.404995 58.871658,22.390274 58.8822100000001,22.381939 58.88694,22.369717 58.890274,22.336109 58.89222,22.276943 58.88943,22.24555 58.878601,22.229439000000127 58.87804,22.177219 58.88888500000013,22.164997 58.891937,22.06361 58.923607000000118,22.05333 58.927773,22.044998 58.932495,22.04222 58.939987,22.046387 58.945267000000115,22.052219 58.949715,22.064999000000114 58.952217000000132,22.191105 58.947487000000137,22.375553 58.95166,22.434441 58.966385,22.468052 58.978043,22.487774000000115 58.992218,22.523609 59.022491000000116,22.575829000000113 59.068604,22.699162 59.051384,22.694717 59.044159,22.6986 59.019989,22.70305 59.013611,22.719715000000122 59.003609,22.733883 59.001389,22.749718000000144 59.000000000000114)),((25.780277 59.628876000000105,25.873051 59.598877,25.979996000000142 59.632767,26.03083 59.622765,26.04361 59.619987,26.078053 59.600548,26.263054000000125 59.585823,26.389717 59.561661000000129,26.458328000000108 59.541107,26.479996 59.533882000000119,26.496105000000114 59.53277,26.525276 59.536385000000109,26.538052 59.539162,26.561665000000119 59.545273,26.57249800000011 59.54916,26.578053 59.55555,26.58889 59.55916,26.621662 59.557213,26.650551000000121 59.553322,26.67582700000014 59.547493,26.736938 59.522491,26.772774 59.503883,26.817219 59.48082,26.84972 59.469437,26.860275 59.46583,26.8836060000001 59.45916,26.921383000000105 59.450829000000113,26.964718 59.444992,26.98083 59.44388,27.033333 59.44249,27.0875 59.442215,27.185272000000111 59.446938,27.391106 59.448601,27.427219 59.44833,27.4436070000001 59.44721,27.45805 59.445267,27.483051 59.43943,27.50999800000011 59.434433000000126,27.553051 59.428604000000121,27.848053 59.406654000000117,27.88055 59.407768,27.89527500000014 59.409431,27.933331000000123 59.41721,27.953884 59.425270000000125,27.97805 59.440544,27.99305 59.45138500000013,27.998882 59.457771,28.015831 59.4786,28.026386 59.47499,28.07611 59.453323,28.10944 59.436104,28.170273 59.397774,28.180828 59.389435,28.193886000000134 59.375824,28.195274 59.369438,28.19361 59.363327,28.17932100000013 59.328236000000118,28.170359 59.30978,28.158232000000112 59.297653,28.143995 59.290802,28.09549 59.283947,28.055418 59.279202,28.030111 59.277092,28.01113 59.279728,27.995840000000101 59.284473,27.97106 59.287109,27.951551 59.285530000000108,27.920444 59.275509,27.912537 59.271820000000105,27.879847 59.22806,27.837219 59.150826,27.810555 59.102493,27.803329 59.085266,27.792221 59.063324,27.788052000000107 59.058601,27.704994 58.98582,27.689438000000109 58.97943,27.596943000000124 58.931381000000101,27.549999000000128 58.907768,27.533886 58.902214,27.493607 58.881935,27.457218 58.85249,27.43944 58.83416,27.435551 58.829437,27.428608 58.819160000000124,27.426105 58.813606000000107,27.423050000000103 58.80138,27.421661 58.78833,27.421661 58.78138,27.451107 58.686935,27.488049 58.576385,27.490551 58.570831,27.495827 58.55999,27.500832 58.548882000000106,27.517498 58.50972,27.521385000000123 58.498329000000126,27.535275 58.450829,27.542496000000142 58.413879,27.543610000000115 58.393883,27.543331000000137 58.373322,27.541943 58.36721,27.539165 58.361664,27.534996 58.356941,27.525829000000101 58.348045,27.514999 58.339989,27.496662 58.32888,27.48582800000014 58.320831000000112,27.467216 58.303047,27.464718 58.297775,27.464439 58.283882,27.47166 58.226379,27.474163 58.213882,27.476662 58.208603,27.48055 58.203606,27.54888 58.13694,27.554165 58.132767000000115,27.565830000000119 58.125267,27.58 58.11916,27.60194 58.109993000000145,27.60972 58.107216,27.625275 58.101662,27.641106 58.0961,27.65 58.094154,27.663052 58.087212000000136,27.67332800000014 58.07888000000014,27.677219 58.074165000000107,27.680828 58.062492,27.686661 57.965271,27.77333 57.902214,27.784721 57.89888,27.805275 57.891106,27.809998000000121 57.88888500000013,27.817497000000117 57.88388,27.820274 57.881104,27.823051000000135 57.873878000000104,27.822773 57.869713000000104,27.82111 57.865829,27.813885 57.860275000000115,27.785275 57.84833,27.753052 57.839157,27.734993 57.835548,27.702217000000132 57.831665,27.673607000000118 57.830276,27.629997000000117 57.828606,27.577221 57.82277,27.55139 57.819443,27.545830000000137 57.817772,27.40583 57.68499,27.400829 57.678047,27.348053 57.595543000000134,27.34694 57.5911,27.34694 57.586937,27.348053 57.583054000000118,27.353329 57.568604,27.361664000000133 57.547493000000145,27.363331 57.54416,27.372059 57.535637,27.31028 57.531380000000127,27.08722 57.56221,27.080551 57.563606,27.07027 57.567497,27.051662000000135 57.588326,27.03944 57.599716000000114,27.03194 57.604713,27.01861 57.611382000000106,26.996105 57.61832,26.96999 57.62332,26.906105 57.633049000000142,26.898331 57.633881,26.883884 57.633606,26.873051 57.630547,26.69777 57.575554,26.63499 57.555824,26.626385 57.551102000000128,26.619995 57.544998000000135,26.615273000000116 57.533051,26.612774000000115 57.529434,26.60889 57.526939,26.602776000000119 57.525826000000109,26.53889 57.522217000000126,26.523609000000135 57.523048000000131,26.51139 57.5261,26.313332 57.605,26.299164 57.611382000000106,26.287498 57.618881,26.274166 57.62971,26.204441 57.69499,26.034996 57.823326,25.946941 57.85388,25.883053 57.85583,25.836384 57.860550000000103,25.80139 57.865829,25.622772000000111 57.916382,25.618053 57.918327,25.461105 57.994438,25.453327 57.999435,25.44944 58.005829000000119,25.444996 58.020828,25.439995 58.026939,25.436108 58.029434,25.42166 58.03555,25.307499000000121 58.08138300000013,25.301662000000135 58.083054,25.294998000000135 58.084435,25.28722 58.08416,25.275555000000111 58.081665,25.266941 58.076942,25.263054000000125 58.06916,25.264442 58.061378000000104,25.288887 58.047218,25.29472 58.04138,25.296944 58.038048,25.300274 58.026939,25.30055 58.018883,25.299999 58.01416,25.294441 58.0075,25.28583 58.003052,25.247215 57.99249,25.232494 57.992767000000129,25.223885 57.997215,25.215 58.005829000000119,25.210827 58.01249700000011,25.207218 58.028046,25.203884 58.03916,25.199718000000132 58.049995000000138,25.192493 58.059433000000126,25.179718 58.070274,25.169994 58.07444,25.163052 58.07583,25.139164 58.07666,25.124439000000109 58.076103,25.09166 58.071663,25.07 58.065269,25.060829 58.061104,25.03833 58.050270000000125,25.015831000000105 58.039436,24.723885 57.964996,24.56055 57.95555,24.553608 57.954712,24.542774000000122 57.95166,24.453049 57.913322,24.443329000000119 57.904434,24.441105000000107 57.900826000000109,24.438328 57.89277,24.433884 57.88583,24.42777 57.879433,24.420273 57.874435,24.4025 57.870544000000109,24.37305 57.868881,24.32444 57.87027,24.31498 57.871826,24.338051 57.923882,24.345829 57.93943,24.353886 57.954712,24.363052 57.96888,24.389996 58.002777,24.400829000000101 58.016106,24.41194 58.029434,24.426105 58.040833,24.433884 58.046104,24.456661 58.076103,24.46999 58.122765,24.471661 58.131935,24.471107 58.1486,24.468884000000116 58.156097000000102,24.452496 58.18277,24.469440000000134 58.23916,24.472771 58.247215,24.47916 58.253326,24.486938 58.25861,24.498051 58.26166,24.526665 58.274162000000103,24.542496 58.284439,24.555275000000108 58.296944,24.559998 58.303879000000109,24.561665 58.31305,24.559441 58.320549,24.55555 58.327217,24.541386 58.33804,24.51778 58.35305000000011,24.458885 58.37833,24.419716 58.38666,24.390553 58.390831000000105,24.362495 58.39194,24.348331000000144 58.390831000000105,24.335552 58.3886,24.326107 58.38472,24.30055 58.359993,24.29583 58.352776,24.29305 58.33638,24.293331 58.328049,24.291943 58.318886,24.28722 58.311661,24.28083 58.30555,24.246105 58.27666,24.238049 58.271378,24.110554 58.232208,24.100552000000107 58.236382,24.092773 58.24138,24.056664 58.26777,24.050552 58.273605,24.01083 58.29861,23.99305 58.30777,23.973328 58.315826,23.949718 58.322495000000117,23.937775 58.325829000000113,23.826385 58.354713,23.78167 58.350273,23.770832 58.346939,23.728607 58.370827,23.679161 58.425552,23.630829000000119 58.5236,23.61694 58.5261,23.524719 58.558327,23.50111 58.576942,23.495548 58.69415,23.523331 58.73555,23.529442 58.741661,23.538887 58.746101000000124,23.549442000000113 58.743881000000101,23.56944 58.73555,23.583332 58.733047,23.60083 58.732491,23.725552 58.744713,23.867496 58.766388,23.874996 58.7686,23.85722 58.7786,23.827221 58.79111,23.805275 58.798607,23.79139 58.800827,23.59166 58.788048,23.483051000000103 58.80999,23.420273 58.903877000000136,23.416107 58.910545,23.41555000000011 58.91888,23.431107 58.939430000000129,23.445549000000142 58.940544000000102,23.477219 58.937492,23.507500000000107 58.93721,23.57694 58.947212,23.58833 58.950546,23.637775 58.970543000000134,23.635551 58.978043,23.628330000000119 59.000549,23.623329 59.015549,23.617218 59.021378,23.590553000000114 59.035271,23.57222 59.044159,23.56028 59.047493,23.56472 59.040833,23.570831 59.035271,23.60139 59.022766000000104,23.60944 59.01777,23.611942 59.010277,23.6055530000001 59.004166,23.55638 58.98777,23.514164000000108 58.981102,23.46638 58.98416,23.45249600000011 58.986382,23.436108 58.997215,23.413609 59.012772,23.407219 59.0186,23.42833 59.051933,23.43305 59.059158,23.440830000000119 59.064438,23.482494 59.08943,23.465549 59.191376,23.463051 59.19887,23.464161 59.206383,23.470551 59.212494,23.49972 59.225266,23.51083 59.228325,23.613609 59.23972,23.711384 59.231102000000135,23.727219 59.22971,23.738605 59.232765,23.744995000000131 59.23916,23.742493 59.24638,23.736382 59.25222,23.725552 59.264717,23.721382 59.271378000000141,23.729439 59.276657000000114,23.742218 59.278603,23.830830000000105 59.289719,23.85694100000012 59.284164,23.891106 59.273323000000119,23.905273 59.270828000000108,23.936108000000104 59.272217000000126,24.027222 59.287773,24.024166 59.356102,24.02 59.36277,24.019444 59.371101,24.022774 59.379158,24.029163 59.38527,24.03722 59.390549,24.050274000000115 59.392769,24.064999 59.393883,24.08111 59.39222,24.105274 59.385551,24.12361 59.37666,24.148052 59.361664000000133,24.176662 59.348328,24.186661 59.344154,24.19916 59.342766,24.212215000000128 59.344994,24.318886000000134 59.425827,24.325275 59.431938000000116,24.32444 59.45694,24.329163000000108 59.464157000000114,24.339165 59.468323,24.350552 59.471375000000137,24.363609 59.473602,24.394718 59.47499,24.41083 59.473320000000115,24.536663 59.457214000000135,24.72277 59.452774,24.791943 59.51028,24.779163 59.520271,24.776943 59.527489,24.771664 59.557495,24.776665 59.564438,24.79 59.566666,24.801941 59.563324,24.860554 59.545547,24.868607 59.54055000000011,24.887218 59.523048,24.909439 59.507217,24.927494 59.506386,25.05055 59.51194,25.100552 59.5261,25.10722 59.532211,25.121941 59.533333,25.154442000000131 59.53166,25.25833 59.51416,25.282776 59.509163,25.318886 59.498878,25.358887 59.490547,25.392494 59.485825,25.405926 59.49064,25.490829 59.561104,25.486938 59.5686,25.46944 59.648331,25.471107 59.656654,25.476383000000112 59.663048000000117,25.49277 59.66415400000011,25.591663 59.60388,25.59916 59.59833,25.609997 59.585548,25.631939000000102 59.568886,25.64277 59.565269,25.655552 59.562767,25.673885 59.562767,25.700829000000113 59.568329000000119,25.709995 59.57277,25.715271 59.579437,25.715271 59.5886,25.71333 59.596657000000107,25.707771 59.60305,25.693329 59.61416,25.687775 59.62054,25.66916 59.653603,25.67472 59.659988,25.6836 59.664711,25.694439 59.668327,25.70916 59.66666,25.719994 59.662766,25.7675 59.640831,25.774719000000118 59.635551000000135,25.780277 59.628876000000105)))");
        multiPolygonWKT.load(null, shapeConfigurationCallback, multiPolygonLayer);
        wwd.addLayer(multiPolygonLayer);

        //Point test
        var pointLayer = new WorldWind.RenderableLayer("Point");
        var pointWKT = new WorldWind.WKTParser("POINT (14.5 50)");
        pointWKT.load(null, shapeConfigurationCallback, pointLayer);
        wwd.addLayer(pointLayer);

        //MultiPoint test
        var multiPointLayer = new WorldWind.RenderableLayer("MultiPoint");
        var multiPointWKT = new WorldWind.WKTParser("MULTIPOINT ((17.2 49.3), (17.23 49.24), (17.14 49.37), (17.2 49.24))");
        multiPointWKT.load(null, shapeConfigurationCallback, multiPointLayer);
        wwd.addLayer(multiPointLayer);

        //LineString test
        var lineStringLayer = new WorldWind.RenderableLayer("LineString");
        var lineStringDataSource = 'LINESTRING ((19.436214 41.021065,19.450554 41.059998,19.513611 41.251938,19.513885 41.256104,19.51083 41.274437,19.509441 41.277771,19.504719 41.287216,19.492496 41.300552,19.482777 41.30722,19.467499 41.310829,19.452221 41.309715,19.442497 41.406944,19.519997 41.57,19.566666 41.584999,19.584721 41.605827,19.586941 41.638611,19.570829 41.685268,19.57972 41.692497,19.584164 41.698883,19.598053 41.771111,19.600277 41.78833,19.600555 41.796661,19.59972 41.804161,19.596664 41.810555,19.593887 41.813049,19.524757 41.835243,19.488888 41.849442,19.469997 41.854996,19.449165 41.859718,19.431664 41.862221,19.421108 41.861938,19.411388 41.86055,19.367771 41.848999,19.34333 41.912498,19.346943 41.955551,19.373333 42.06694,19.374603 42.071487,19.378052 42.078606,19.380981 42.081001,19.384163 42.083611,19.398888 42.101387,19.400276 42.10527,19.398331 42.10833,19.386387 42.11805,19.369999 42.128883,19.332222 42.152496,19.300278 42.171104,19.284443 42.182777,19.282497 42.185555,19.286942 42.192215,19.519722 42.448608,19.606388 42.539444,19.608887 42.542496,19.612499 42.549995,19.610832 42.561104,19.608608 42.568054,19.609444 42.572495,19.615833 42.582497,19.633331 42.603333,19.645832 42.61805,19.657219 42.628326,19.708885 42.658882,19.713055 42.660553,19.722775 42.661942,19.726665 42.659996,19.75333 42.64222,19.755833 42.639717,19.773052 42.597496,19.773609 42.593605,19.772778 42.589996,19.770275 42.586937,19.766109 42.585548,19.759998 42.586388,19.752499 42.583054,19.75 42.579994,19.746944 42.546944,19.746666 42.543053,19.765274 42.504715,19.773609 42.497215,19.790276 42.486107,19.79361 42.483887,19.801666 42.48027,19.822498 42.471939,19.919441 42.512497,19.935276 42.518608,20.049164 42.561661,20.053333 42.563049,20.057777 42.563889,20.064163 42.563049,20.071423 42.560913,20.0975 42.536942,20.106667 42.529999,20.158054 42.513329,20.161942 42.511665,20.16861 42.506943,20.220833 42.433327,20.224163 42.423332,20.241943 42.368889,20.241108 42.364166,20.237778 42.356667,20.237499 42.352493,20.24361 42.33194,20.24472 42.328606,20.25222 42.32444,20.2575 42.323326,20.355675 42.311844,20.386944 42.304161,20.450832 42.278328,20.458054 42.274437,20.470432 42.264557,20.508888 42.23027,20.524166 42.214439,20.526108 42.211662,20.595276 42.04361,20.623333 41.966942,20.623886 41.963333,20.621944 41.954163,20.617775 41.941666,20.611385 41.937492,20.595276 41.931938,20.588608 41.927498,20.583054 41.922218,20.581108 41.918884,20.58083 41.906662,20.589642 41.882187,20.568951 41.874542,20.533607 41.776939,20.519997 41.75222,20.516941 41.743889,20.514164 41.727776,20.533886 41.63472,20.46611 41.55555,20.458054 41.526382,20.457775 41.522217,20.458885 41.518883,20.460552 41.515831,20.469719 41.500832,20.471664 41.497772,20.50861 41.459717,20.561386 41.411385,20.562496 41.408051,20.562222 41.403885,20.549999 41.373055,20.524166 41.350273,20.50222 41.348053,20.497498 41.347221,20.496109 41.34333,20.492775 41.331108,20.495552 41.320549,20.502499 41.304443,20.519165 41.246384,20.578331 41.162773,20.600613 41.093185,20.654999 41.090271,20.669998 41.088051,20.733887 40.911942,20.735119 40.911057,20.743332 40.907776,20.75333 40.905273,20.759163 40.904442,20.802498 40.899994,20.811943 40.901108,20.82111 40.908882,20.830276 40.92083,20.840832 40.932495,20.848331 40.935555,20.944164 40.919167,20.957222 40.914162,20.968887 40.908607,20.971943 40.906387,20.982445 40.895248,20.983887 40.893608,20.984165 40.891663,20.98349 40.855888,20.983887 40.793053,21.020832 40.715553,21.028889 40.708054,21.036587 40.698563,21.046665 40.685829,21.051941 40.676666,21.053055 40.673332,21.054165 40.661942,21.053608 40.622772))';
        var lineStringWKT = new WorldWind.WKTParser(lineStringDataSource);
        lineStringWKT.load(null, shapeConfigurationCallback, lineStringLayer);
        wwd.addLayer(lineStringLayer);

        //MultiLineString test
        var multiLineStringLayer = new WorldWind.RenderableLayer("MultiLineString");
        var multiLineStringWKT = new WorldWind.WKTParser("MULTILINESTRING ((15.14 48.02, 15.16 48.04, 15.11 48.01, 15.09 48.05), (15.14 48.12, 15.16 48.14, 15.11 48.11, 15.09 48.15), (15.14 48.22, 15.16 48.24, 15.11 48.21, 15.09 48.25), (15.14 48.32, 15.16 48.34, 15.11 48.31, 15.09 48.35), (15.14 48.42, 15.16 48.44, 15.11 48.41, 15.09 48.45))");
        multiLineStringWKT.load(null, shapeConfigurationCallback, multiLineStringLayer);
        wwd.addLayer(multiLineStringLayer);

        // Create a layer manager for controlling layer visibility.
        var layerManger = new LayerManager(wwd);
    });